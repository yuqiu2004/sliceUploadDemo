# 大文件分片上传demo

[参考文章1](https://juejin.cn/post/7213275960900632632)
[参考文章2](https://juejin.cn/post/7039554714077233189)

## 处理思路

1. 前端计算文件的哈希值（md5），将文件分片，然后将fileHash传给后端查询上传进度
2. 后端通过fileHash和userId拼接加密为uploadKey
3. 然后通过这个键值查询redis缓存中，是否存在对应的对象
   1. 如果存在 说明已经上传了部分 返回已经上传的进度
   2. 如果不存在 则返回0
4. 通过上传路径上传分片
5. 上传完调用接口合并分片



1. 前端计算文件哈希 获取唯一标识 然后将文件切片 将切片数和文件哈希以及文件名封装 发送上传请求
2. 后端根据唯一标识生成键值 首先查询是否存在上传的记录
   1. 如果有则说明需要续传
   2. 否则说明是首次上传
   3. 后端返回 uploadId、objectName以及需要上传的分片和对应的上传地址
3. 开始上传 ---
4. 上传完成后调用接口合并